local omg = Instance.new("Model")
omg.Parent = workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value]
omg.Name = "DreadClock"

local currentLoadedRoom = workspace.CurrentRooms[game:GetService("ReplicatedStorage").GameData.LatestRoom.Value]
local eyes = game:GetObjects("rbxassetid://15033250482")[1]

local num = 0
if currentLoadedRoom:FindFirstChild("PathfindNodes") then
    num = math.floor(#currentLoadedRoom.PathfindNodes:GetChildren()/2)
end

eyes:PivotTo((
    num == 0 and currentLoadedRoom[currentLoadedRoom.Name] or currentLoadedRoom.PathfindNodes[num]
).CFrame + Vector3.new(0, 5, 0))

eyes.Parent = workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value].DreadClock
eyes.PrimaryPart.Anchored = true

function GitAud(soundlink, filename)
    local url = soundlink
    local FileName = filename
    if not isfile(FileName..".mp3") then
        writefile(FileName..".mp3", game:HttpGet(url))
    end
    return (getcustomasset or getsynasset)(FileName..".mp3")
end

function CustomGitSound(soundlink, vol, filename, duration)
    local DreadSound = Instance.new("Sound")
    DreadSound.SoundId = GitAud(soundlink, filename)
    DreadSound.Parent = workspace
    DreadSound.Volume = vol
    DreadSound.Looped = true
    DreadSound:Play()

    -- Hiệu ứng môi trường: ánh sáng màu xanh dương
    local blueLight = Instance.new("PointLight")
    blueLight.Color = Color3.fromRGB(0, 170, 255)
    blueLight.Brightness = 2
    blueLight.Range = 50
    blueLight.Parent = workspace.CurrentRooms[game.ReplicatedStorage.GameData.LatestRoom.Value]

    -- Giảm tốc độ người chơi mỗi 2.5 giây
    local Players = game:GetService("Players")
    local durationElapsed = 0
    local speedDecrease = 0.5
    while durationElapsed < duration do
        for _, player in pairs(Players:GetPlayers()) do
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = math.max(0, player.Character.Humanoid.WalkSpeed - speedDecrease)
            end
        end
        wait(2.5)
        durationElapsed = durationElapsed + 2.5
    end

    DreadSound:Destroy()
    blueLight:Destroy()
end

-- Phát âm thanh với hiệu ứng
CustomGitSound("https://github.com/Kotyara19k-Doorsspawner/Random-files/raw/main/ClockSounds.mp3", 1, "DreadClock", 35)
